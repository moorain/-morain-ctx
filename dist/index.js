!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define(["react"],e);else{var n="object"==typeof exports?e(require("react")):e(t.React);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(self,(t=>(()=>{"use strict";var e={983:function(t,e){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._events={},this._functionEvents={},this._data={},this._onceRunning={},this._context={},this.use("global",{key:"globalState"})}return t.prototype._getNameSpace=function(t){if("string"==typeof t){if(t.indexOf(":")>-1){var e=t.split(":");return{name:e[0],code:e[1]}}return{name:"global",code:t}}throw new Error("nameSpace must be string")},t.prototype._setupProxy=function(t,e){var r=this,o={get:function(t,e){return t[e]},set:function(e,n,o){return e[n]=o,r._triggerChange(t,n,o),!0},deleteProperty:function(t,e){return delete t[e],!0}};this._data[t]=new Proxy(n({},e),o)},t.prototype._isValidNamespace=function(t){return"string"==typeof t},t.prototype.use=function(e,n){var r=this;if(!this._isValidNamespace(e)||this._context[e])throw new Error("Invalid namespace or namespace already exists!");this._setupProxy(e,n),this._events[e]={},this._functionEvents[e]={},this._onceRunning[e]={};var o={data:this._data[e],run:function(t,n){r.run("".concat(e,":").concat(t),n)},listen:function(t,n){r.listen("".concat(e,":").concat(t),n)},remove:function(t,n){r.remove("".concat(e,":").concat(t),n)},on:function(t,n){r.on("".concat(e,":").concat(t),n)},off:function(t,n){r.off("".concat(e,":").concat(t),n)}};this._context[e]=o,Object.defineProperty(t.prototype,e,{get:function(){return this._data[e]},enumerable:!0,configurable:!0})},t.prototype._getListeners=function(t,e){return this._events[t][e]},t.prototype._getEventListeners=function(t,e){return this._functionEvents[t][e]},t.prototype._triggerChange=function(t,e,n){var r=this._getListeners(t,e);r&&r.forEach((function(t){t(n)}))},t.prototype.destroy=function(){this._events=null,this._functionEvents=null,this._data=null,this._onceRunning=null,this._context=null},t.prototype.getContext=function(t){return this._context[t]},t.prototype.data=function(t){return void 0===t&&(t="global"),this._data[t]},t.prototype.once=function(t,e){var n=this,r=this._getNameSpace(t),o=r.name,i=r.code;"running"!==this._onceRunning[o][i]&&(this._onceRunning[o][i]="running","function"==typeof e&&e((function(){n._onceRunning[o][i]="waitingNext"})))},t.prototype.run=function(t,e){var n=this._getNameSpace(t),r=n.name,o=n.code,i=this._getEventListeners(r,o);i&&i.forEach((function(t){t(e)}))},t.prototype.on=function(t,e){var n=this._getNameSpace(t),r=n.name,o=n.code,i=this._getListeners(r,o);i?i.push(e):this._events[r][o]=[e]},t.prototype.off=function(t,e){var n=this._getNameSpace(t),r=n.name,o=n.code,i=this._getListeners(r,o);if(i){var u=i.indexOf(e);u>-1&&i.splice(u,1)}},t.prototype.listen=function(t,e){var n=this._getNameSpace(t),r=n.name,o=n.code,i=this._getEventListeners(r,o);i?i.push(e):this._functionEvents[r][o]=[e]},t.prototype.remove=function(t,e){var n=this._getNameSpace(t),r=n.name,o=n.code,i=this._getEventListeners(r,o);if(i){var u=i.indexOf(e);u>-1&&i.splice(u,1)}},t}();e.default=r},409:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=new(r(n(983)).default);e.default=o},607:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ctx=e.useCtxEvent=e.useCtxData=void 0;var o=n(837);Object.defineProperty(e,"useCtxData",{enumerable:!0,get:function(){return r(o).default}});var i=n(420);Object.defineProperty(e,"useCtxEvent",{enumerable:!0,get:function(){return r(i).default}});var u=n(409);Object.defineProperty(e,"ctx",{enumerable:!0,get:function(){return r(u).default}})},837:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(787),i=r(n(409)),u=/^([a-zA-Z0-9]+):([a-zA-Z0-9]+)(?:\.[a-zA-Z0-9]+)*$/;function a(t,e){if(null!=t&&Array.isArray(e))return e.reduce((function(t,e){return null!=t&&"object"==typeof t&&e in t?t[e]:void 0}),t)}e.default=function(t){var e=t;if("string"==typeof e&&e.indexOf(":")<0&&(e="global:".concat(e)),!u.test(e)||"string"!=typeof e)throw new Error("useCtx: 传入的参数不符合规范");var n=e.split(":"),r=n[0],c=n[1],s=i.default.getContext(r);if(!s)throw new Error("useCtx: 未找到命名空间".concat(r));var f=c.split("."),p=f[0],l=f.slice(1),_=(0,o.useRef)(),d=(0,o.useState)(a(s.data[p],l)),v=d[0],h=d[1];return _.current=v,(0,o.useEffect)((function(){var t=function(t){var e=a(t,l);e!==_.current&&h(e)};return s.on(p,t),function(){s.off(p,t)}}),[]),v}},420:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(787),i=r(n(409));e.default=function(t,e){return(0,o.useEffect)((function(){if(e)return i.default.listen(t,e),function(){i.default.remove(t,e)}}),[]),function(e){i.default.run(t,e)}}},787:e=>{e.exports=t}},n={};var r=function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return e[r].call(i.exports,i,i.exports,t),i.exports}(607);return r})()));