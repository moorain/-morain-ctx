!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define(["react"],e);else{var n="object"==typeof exports?e(require("react")):e(t.React);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(self,(t=>(()=>{"use strict";var e={983:function(t,e){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.events={},this.functionEvents={},this.data={},this.onceRunning={},this.context={}}return t.prototype.setupProxy=function(t,e){var r=this,o={get:function(t,e){return t[e]},set:function(e,n,o){return e[n]=o,r._triggerChange(t,n,o),!0},deleteProperty:function(t,e){return delete t[e],!0}};this.data[t]=new Proxy(n({},e),o)},t.prototype.use=function(t,e){var n=this;if(t){this.setupProxy(t,e),this.events[t]={},this.functionEvents[t]={},this.onceRunning[t]={};var r={data:this.data[t],get:function(e){return n.data[t][e]},set:function(e,r){n.data[t][e]=r},run:function(e,r){n._run(t,e,r)},on:function(e,r){n._on(t,e,r)},off:function(e,r){n._off(t,e,r)},listen:function(e,r){n._listen(t,e,r)},remove:function(e,r){n._remove(t,e,r)},once:function(e,r){"running"!==n.onceRunning[t][e]&&(n.onceRunning[t][e]="running","function"==typeof r&&r((function(){n.onceRunning[t][e]="waitingNext"})))}};this.context[t]=r}},t.prototype.getContext=function(t){return this.context[t]},t.prototype._getListeners=function(t,e){return this.events[t][e]},t.prototype._getEventListeners=function(t,e){return this.functionEvents[t][e]},t.prototype._triggerChange=function(t,e,n){var r=this._getListeners(t,e);r&&r.forEach((function(t){t(n)}))},t.prototype._run=function(t,e,n){var r=this._getEventListeners(t,e);r&&r.forEach((function(t){t(n)}))},t.prototype._on=function(t,e,n){var r=this._getListeners(t,e);r?r.push(n):this.events[t][e]=[n]},t.prototype._off=function(t,e,n){var r=this._getListeners(t,e);if(r){var o=r.indexOf(n);o>-1&&r.splice(o,1)}},t.prototype._listen=function(t,e,n){var r=this._getEventListeners(t,e);r?r.push(n):this.functionEvents[t][e]=[n]},t.prototype._remove=function(t,e,n){var r=this._getEventListeners(t,e);if(r){var o=r.indexOf(n);o>-1&&r.splice(o,1)}},t}();e.default=r},409:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=new(r(n(983)).default);e.default=o},607:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ctx=e.useCtxEvent=e.useCtxData=void 0;var o=n(837);Object.defineProperty(e,"useCtxData",{enumerable:!0,get:function(){return r(o).default}});var i=n(420);Object.defineProperty(e,"useCtxEvent",{enumerable:!0,get:function(){return r(i).default}});var u=n(409);Object.defineProperty(e,"ctx",{enumerable:!0,get:function(){return r(u).default}})},837:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(787),i=r(n(409)),u=/^([a-zA-Z0-9]+):([a-zA-Z0-9]+)(?:\.[a-zA-Z0-9]+)*$/;function f(t,e){if(null!=t&&Array.isArray(e))return e.reduce((function(t,e){return null!=t&&"object"==typeof t&&e in t?t[e]:void 0}),t)}e.default=function(t){if(!u.test(t)||"string"!=typeof t)throw new Error("useCtx: 传入的参数不符合规范");var e=t.split(":"),n=e[0],r=e[1],s=i.default.getContext(n);if(!s)throw new Error("useCtx: 未找到命名空间".concat(n));var c=r.split("."),a=c[0],p=c.slice(1),l=(0,o.useRef)(),v=(0,o.useState)(f(s.data[a],p)),d=v[0],_=v[1];return l.current=d,(0,o.useEffect)((function(){var t=function(t){var e=f(t,p);e!==l.current&&_(e)};return s.on(a,t),function(){s.off(a,t)}}),[]),d}},420:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(787),i=r(n(409));e.default=function(t,e){var n=t.split(":"),r=n[0],u=n[1],f=i.default.getContext(r);return(0,o.useEffect)((function(){if(e)return f.listen(u,e),function(){f.remove(u,e)}}),[]),function(t){f.run(u,t)}}},787:e=>{e.exports=t}},n={};return function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return e[r].call(i.exports,i,i.exports,t),i.exports}(607)})()));